# EBS, Snapshot, AMI

## EBS

Amazone Elastic Block Store(EBS)는 AWS 클라우드의 Amazone EC2 인스턴스에 사용할 영구 블록 스토리지 볼륨을 제공한다. 각 Amazon EBS 볼륨은 가용 영역 내에 자동으로 복제되어 구성 요소 장애로부터 보호해주고, 고가용성 및 내구성을 제공한다. Amazon EBS 볼륨은 워크로드 실행에 필요한 지연 시간이 짧고 일관된 성능을 제공한다.  

 - 가상 하드 드라이브
 - EC2 인스턴스가 종료되어도 계속 유지 가능
 - EC2 인스턴스와 EBS는 네트워크로 묶여있다.
    - 컴퓨팅 성능을 높이고 싶은 경우에 네트워크가 연결된 EC2만 변경하면 된다. (업그레이드 용이)
    - EC2의 경우 용량을 높이고 싶은 경우 네트워크로 연결된 EBS만 늘리면 된다. (EC2 하나의 여러 개의 EBS 연결 가능)
    - 하나의 EBS를 여러 EC2에 장착 가능하다. (EBS Multi Attach)
 - 인스턴스를 정지시키더라도 EBS 요금은 계속 부과된다.
 - 루트 볼륨으로 사용시 EC2가 종료되면 같이 삭제 된다. (EC2 생성시 기본 옵션)
    - 단, 설정을 통해 EBS를 따로 존속하도록 할 수 있다.
 - EC2와 같은 가용 영역에 존재한다. (다른 가용 영역에 생성되면 붙일 수 없음)
 - 총 5가지 타입 제공
    - 범용: SSD
    - 프로비저닝 된 IOPS: SSD
    - 쓰루풋 최적화
    - 콜드 HDD
    - 마그네틱
 - `EBS 종류`
    - 범용 타입(GP3)
        - 용량: 1GB ~ 16TB
        - 사용: 일반 범용
        - MAX IOPS: 16,000
    - 프로비저닝된 IOPS(IO2)
        - 용량: 4GB ~ 16TB
        - 사용: IOPS가 중요한 애플리케이션, 데이터베이스
        - MAX IOPS: 64,000 
    - 쓰루풋 최적화 HDD
        - 용량: 500GB ~ 16TB
        - 사용: 쓰루풋이 중요한 애플리케이션, 하둡, OLAP 데이터베이스
        - MAX IOPS: 500
    - 콜드 HDD
        - 용량: 500GB ~ 16TB
        - 사용: 파일 저장소
        - MAX IOPS: 250
    - 마그네틱
        - 용량: 1GB ~ 1TB
        - 사용: 백업, 비주기적인 데이터 액세스
        - MAX IOPS: 40 ~ 200

<br/>

## Snapshot

 - 특정 시간에 EBS 상태 저장본
 - 필요시 스냅샷을 통해 특정 시간의 EBS를 복구 가능
 - 스냅샷은 S3에 보관된다.
    - 증분식 저장 (변화한 부분만 추가로 저장)

<br/>

## AMI

 - EC2 인스턴스를 실행하기 위해 필요한 정보를 모은 단위
    - OS, 아키텍처 타입(32-bit, or 64-bit), 저장 공간 용량 등
 - AMI를 사용하여 EC2를 복제하거나 다른 리전 -> 계정으로 전달 가능
 - 스냅샷을 기반으로 AMI 구성 가능
 - `AMI 구성`
    - 1개 이상의 EBS 스냅샷
    - 인스턴스 저장 인스턴스의 경우 루트 볼륨에 대한 템플릿
    - 사용 권한(어떤 AWS 어카운트가 사용할 수 있는지)
    - 블록 디바이스 매핑(EC2 인스턴스를 위한 볼륨 정보, EBS가 무슨 용량으로 몇개가 붙는지)
 - `AMI 타입`
    - EBS 기반: 스냅샷을 기반으로 루트 디바이스 생성
    - 인스턴스 저장 기반: S3에 저장된 템플릿을 기반으로 생성
