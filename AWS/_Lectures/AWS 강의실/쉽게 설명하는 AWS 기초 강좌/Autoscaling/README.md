# Autoscaling(오토스케일링)

## Scaling(스케일링)

 - `Vertical Scale(Scale Up)`
    - 기존 시스템에 더 강력한 하드웨어를 추가하여 성능을 향상시키는 것을 의미합니다. 예를 들어, 서버에 더 많은 RAM을 추가하거나, 높은 성능의 CPU로 교체하는 것이 수직 스케일 업의 예입니다.
    - 단일 서버나 머신 내에서의 확장이기 때문에 관리가 비교적 간단합니다.
    - 하나의 강력한 시스템으로 성능을 향상시키기 때문에 특정 작업에 대해 높은 성능을 제공할 수 있습니다.
 - `Horizontal Scale(Scale Out)`
    - 시스템에 새로운 서버나 머신을 추가하여 전체 시스템의 성능을 향상시키는 것을 의미합니다. 이는 일반적으로 분산 시스템에서 많이 사용됩니다.
    - 여러 서버 간에 작업을 분산하기 때문에 대규모 트래픽 처리 및 고가용성을 구현하기 용이합니다.
    - 단일 서버에 의존하지 않기 때문에 확장성이 좋습니다.
 - `Scale Up과 Scale Out 비교`
    - 비용: 스케일 업은 단일 시스템을 더 강력하게 만드는 것이므로 비용이 더 많이 발생할 수 있습니다. 반면에 스케일 아웃은 여러 저렴한 서버를 추가하는데, 비교적 저렴한 비용으로 확장이 가능합니다.
    - 성능: 스케일 업은 단일 시스템에서의 성능을 향상시키는 데 중점을 둡니다. 스케일 아웃은 여러 시스템을 결합하여 성능을 분산시키는 데 중점을 둡니다.
    - 고가용성 및 신뢰성: 스케일 아웃은 여러 서버 간에 작업을 분산하므로 고가용성을 높일 수 있습니다. 스케일 업은 단일 시스템이기 때문에 장애 시에는 전체 시스템에 영향을 미칠 수 있습니다.

<br/>

## AWS Auto Scaling

AWS Auto Scaling은 애플리케이션을 모니터링하고 용량을 자동으로 조정하여, 최대한 저렴한 비용으로 안전적이고 예측 가능한 성능을 유지한다.  
EC2, DDB, Spot Fleet, Aurora, ECS 등 다양한 Auto Scaling을 지원한다.  

 - 정확한 수의 EC2 인스턴스를 보유하도록 보장
    - 그룹의 최소 인스턴스 숫자 및 최대 인스턴스 숫자
    - 최소 숫자 이하로 내려가지 않도록 인스턴스 숫자를 유지(인스턴스 추가)
    - 최대 숫자 이상 늘어나지 않도록 인스턴스 숫자 유지(인스턴스 삭제)
 - 다양한 스케일링 정책 적용 가능
    - ex) CPU의 부하에 따라 인스턴스 크기 늘리기
 - 가용 영역에 인스턴스가 골고루 분산될 수 있도록 인스턴스 분배

<br/>

### Auto Scaling 구성

 - 시작 구성/시작 템플릿: 무엇을 실행시킬 것인가?
    - EC2의 타입, 사이즈
    - AMI
    - 보안 그룹, Key, IAM
    - 유저 데이터
 - 모니터링: 언제 실행시킬 것인가? + 상태 확인
    - ex) CPU 점유율이 일정 %을 넘어섰을 때 추가로 실행 or 2개 이상이 필요한 스택에서 EC2 하나가 죽었을 때
    - CloudWatch 혹은 ELB와 연계
 - 설정: 얼마나 어떻게 실행시킬 것인가?
    - 최대/최소/원하는 인스턴스 숫자
    - ELB와 연동 등

<br/>

### Auto Scaling 실습

```
1. Auto Scaling 시작 템플릿 만들기
 - EC2 대시보드 > 인스턴스 > 시작 템플릿 생성
    - 템플릿 리소스 설정
        - 시작 템플릿 이름: MyTemplate
        - 템플릿 버전 설명: 오토스케일링 테스트
        - EC2 Auto Scaling에서 사용할 수 있는 템플릿 지침 체크
        - Amazone Machine Image(AMI) 선택
        - 인스턴스 유형: t2.micro
        - 네트워크 설정: VPC
    - 템플릿 유형 설정
        - 템플릿에서 Auto Scaling 그룹 생성 (EC2 대시보드 > Auto Scaling > Auto Scaling 그룹 생성)
        - VPC, 가용 영역 설정
        - 그룹 크기 설정: 최소/최대 용량
        - 태그 추가 (Key: MyTag, Value: tagvalue)
            - 태그를 추가하면 Auto Scaling 그룹 내에 모든 인스턴스에 적용된다.

```
